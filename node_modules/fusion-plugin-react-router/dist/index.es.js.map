{"version":3,"file":"index.es.js","sources":["../src/modules/Status.js","../src/modules/Redirect.js","../src/modules/ServerRouter.js","../src/modules/Route.js","../src/server.js","../src/modules/BrowserRouter.js","../src/browser.js","../src/modules/utils.js","../src/modules/ServerHistory.js","../src/plugin.js","../src/types.js","../src/index.js"],"sourcesContent":["/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\n\ntype StatusPropsType = {\n  children: React.Node,\n  code?: string | number,\n};\ntype StatusContextType = {\n  router: {\n    staticContext: {\n      setCode: (code: number) => void,\n    },\n  },\n};\nexport class Status extends React.Component<StatusPropsType> {\n  constructor(props: StatusPropsType, context: StatusContextType) {\n    super(props, context);\n    const {\n      router: {staticContext},\n    } = context;\n    if (staticContext && staticContext.setCode) {\n      staticContext.setCode(parseInt(this.props.code, 10));\n    }\n  }\n\n  render() {\n    const children = this.props && this.props.children;\n    return Array.isArray(children) ? children[0] : children;\n  }\n}\n\nStatus.contextTypes = {\n  router: PropTypes.shape({\n    staticContext: PropTypes.object,\n  }),\n};\n\nexport const NotFound = <TProps: {children: React.Node}>(props: TProps) => (\n  <Status code={404}>{props.children}</Status>\n);\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\n\nimport type {LocationShapeType, RedirectType} from '../types.js';\n\ntype PropsType = {|\n  to: string | LocationShapeType,\n  push?: boolean,\n  from?: string,\n  exact?: boolean,\n  strict?: boolean,\n  code?: number | string,\n  children?: React.Node,\n|};\ntype ContextType = {\n  router: {\n    history: {\n      push: (el: string | LocationShapeType) => void,\n      replace: (el: string | LocationShapeType) => void,\n    },\n    staticContext?: {\n      setCode: (code: number) => void,\n      redirect: (el: string | LocationShapeType) => void,\n    },\n  },\n};\nexport class Redirect extends React.Component<PropsType> {\n  context: ContextType;\n\n  constructor(props: PropsType, context: ContextType) {\n    super(props, context);\n    if (this.isStatic(context)) this.perform();\n  }\n\n  static defaultProps = {\n    push: false,\n    code: 307,\n  };\n\n  componentDidMount() {\n    if (!this.isStatic()) this.perform();\n  }\n\n  isStatic(context: ContextType = this.context): boolean {\n    return !!(context && context.router && context.router.staticContext);\n  }\n\n  perform() {\n    const {history, staticContext} = this.context.router;\n    const {push, to, code} = this.props;\n\n    if (__NODE__ && staticContext) {\n      staticContext.setCode(parseInt(code, 10));\n      staticContext.redirect(to);\n      return;\n    }\n\n    if (push) {\n      history.push(to);\n    } else {\n      history.replace(to);\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nRedirect.contextTypes = {\n  router: PropTypes.shape({\n    history: PropTypes.shape({\n      push: PropTypes.func.isRequired,\n      replace: PropTypes.func.isRequired,\n    }).isRequired,\n    staticContext: PropTypes.object,\n  }).isRequired,\n};\n\n// Sanity type checking\n(Redirect: RedirectType);\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nimport {Router as RouterUntyped} from 'react-router-dom';\n\nimport type {RouterType, RouterHistoryType} from '../types.js';\n\nconst BaseRouter: RouterType = (RouterUntyped: any);\n\ntype PropsType = {\n  context?: any,\n  onRoute?: Function,\n  history: RouterHistoryType,\n  Provider?: RouterType,\n  basename?: string,\n  children?: React.Node,\n};\n\n/**\n * The public top-level API for a \"static\" <Router>, so-called because it\n * can't actually change the current location. Instead, it just records\n * location changes in a context object. Useful mainly in testing and\n * server-rendering scenarios.\n */\nclass ServerRouter extends React.Component<PropsType> {\n  static defaultProps = {\n    basename: '',\n    context: {},\n    Provider: BaseRouter,\n    onRoute: () => {},\n  };\n\n  getChildContext() {\n    return {\n      router: {\n        staticContext: this.props.context || {},\n      },\n      onRoute: (routeData: any) =>\n        this.props.onRoute && this.props.onRoute(routeData),\n    };\n  }\n\n  render() {\n    const {Provider, history, basename, children} = this.props;\n    if (!Provider) throw new Error('Missing Provider for Server Router');\n    return (\n      <Provider basename={basename} history={history}>\n        {children}\n      </Provider>\n    );\n  }\n}\n\nServerRouter.childContextTypes = {\n  router: () => {},\n  onRoute: () => {},\n};\n\nconst ServerRouterTyped: React.ComponentType<PropsType> = ServerRouter;\nexport {ServerRouterTyped as ServerRouter};\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport {Route as ReactRouterRouteUntyped} from 'react-router-dom';\n\nimport type {RouteType} from '../types.js';\n\nconst ReactRouterRoute: RouteType = ReactRouterRouteUntyped;\n\nconst isEmptyChildren = (children: React.Node) =>\n  React.Children.count(children) === 0;\n\ntype PropsType = {\n  trackingId?: any,\n  component?: React.ComponentType<*>,\n  render?: (...props: any) => React.Node,\n  children?: ((routeProps: {match: MatchType}) => React.Node) | React.Node,\n};\ntype ContextType = {\n  onRoute: any,\n};\ntype MatchType = {\n  isExact: boolean,\n  path: string,\n  params: Object,\n  url: string,\n};\nfunction Route(props: PropsType, context: ContextType) {\n  const {trackingId, component, render, children, ...remainingProps} = props;\n\n  return (\n    <ReactRouterRoute\n      {...remainingProps}\n      // eslint-disable-next-line react/no-children-prop\n      children={(routeProps: {match: MatchType}) => {\n        const {match} = routeProps;\n        if (match && match.isExact) {\n          context.onRoute({\n            page: match.path,\n            title: trackingId || match.path,\n            params: match.params,\n          });\n        }\n\n        if (component)\n          return match ? React.createElement(component, routeProps) : null;\n\n        if (render) return match ? render(routeProps) : null;\n\n        if (typeof children === 'function') return children(routeProps);\n\n        if (children && !isEmptyChildren(children))\n          return React.Children.only(children);\n\n        return null;\n      }}\n    />\n  );\n}\n\nRoute.contextTypes = {\n  onRoute: PropTypes.func.isRequired,\n};\n\nRoute.displayName = 'FusionRoute';\n\nexport {Route};\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {\n  BrowserRouter as BrowserRouterUntyped,\n  HashRouter as HashRouterUntyped,\n  Link as LinkUntyped,\n  MemoryRouter as MemoryRouterUntyped,\n  NavLink as NavLinkUntyped,\n  Prompt as PromptUntyped,\n  Router as _Router,\n  Switch as SwitchUntyped,\n  matchPath as matchPathUntyped,\n  withRouter as withRouterUntyped,\n} from 'react-router-dom';\n\nimport {Status, NotFound} from './modules/Status';\nimport {Redirect} from './modules/Redirect';\nimport {ServerRouter as Router} from './modules/ServerRouter';\nimport {Route} from './modules/Route';\n\nimport type {\n  BrowserRouterType,\n  HashRouterType,\n  LinkType,\n  MemoryRouterType,\n  NavLinkType,\n  PromptType,\n  SwitchType,\n  matchPathType,\n  withRouterType,\n} from './types.js';\n\n/**\n * Cast each of these imports from react-router-dom to a copied-version of their\n * types.  This is necessary as the libdef defined types will not be accessible to\n * consumers of this package.\n */\nconst BrowserRouter: BrowserRouterType = BrowserRouterUntyped;\nconst HashRouter: HashRouterType = HashRouterUntyped;\nconst Link: LinkType = LinkUntyped;\nconst MemoryRouter: MemoryRouterType = MemoryRouterUntyped;\nconst NavLink: NavLinkType = NavLinkUntyped;\nconst Prompt: PromptType = PromptUntyped;\nconst Switch: SwitchType = SwitchUntyped;\nconst matchPath: matchPathType = matchPathUntyped;\nconst withRouter: withRouterType = withRouterUntyped;\n\nexport {\n  BrowserRouter,\n  HashRouter,\n  Link,\n  MemoryRouter,\n  NavLink,\n  Prompt,\n  _Router,\n  Switch,\n  matchPath,\n  withRouter,\n  Status,\n  NotFound,\n  Redirect,\n  Router,\n  Route,\n};\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport {Router as BaseRouterUntyped} from 'react-router-dom';\n\nimport type {RouterType, RouterHistoryType} from '../types.js';\n\nexport {Status, NotFound} from './Status.js';\nexport {Redirect} from './Redirect.js';\n\nconst BaseRouter: RouterType = (BaseRouterUntyped: any);\n\ntype PropsType = {|\n  context?: any,\n  onRoute?: Function,\n  history: RouterHistoryType,\n  Provider?: RouterType,\n  basename?: string,\n  children?: React.Node,\n|};\ntype ContextType = {\n  __IS_PREPARE__: boolean,\n};\nclass BrowserRouter extends React.Component<PropsType> {\n  lastTitle: ?string;\n  context: ContextType;\n\n  static defaultProps = {\n    onRoute: () => {},\n    Provider: BaseRouter,\n  };\n\n  constructor(props: PropsType, context: ContextType) {\n    super(props, context);\n    this.lastTitle = null;\n  }\n\n  getChildContext() {\n    const {__IS_PREPARE__} = this.context;\n    return {\n      onRoute: (routeData: any) => {\n        if (routeData.title !== this.lastTitle && !__IS_PREPARE__) {\n          this.lastTitle = routeData.title;\n          this.props.onRoute && this.props.onRoute(routeData);\n        }\n      },\n    };\n  }\n\n  render() {\n    const {Provider, history, basename} = this.props;\n    if (!Provider) throw new Error('Missing Provider for Browser Router');\n    return (\n      <Provider basename={basename} history={history}>\n        {this.props.children}\n      </Provider>\n    );\n  }\n}\n\nBrowserRouter.propTypes = {\n  children: PropTypes.node,\n  onRoute: PropTypes.func,\n  history: PropTypes.object,\n  Provider: PropTypes.any,\n  basename: PropTypes.string,\n};\n\nBrowserRouter.contextTypes = {\n  __IS_PREPARE__: PropTypes.bool,\n};\n\nBrowserRouter.childContextTypes = {\n  onRoute: PropTypes.func.isRequired,\n};\n\nconst BrowserRouterTyped: React.ComponentType<PropsType> = BrowserRouter;\nexport {BrowserRouterTyped as Router};\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {\n  BrowserRouter as BrowserRouterUntyped,\n  HashRouter as HashRouterUntyped,\n  Link as LinkUntyped,\n  MemoryRouter as MemoryRouterUntyped,\n  NavLink as NavLinkUntyped,\n  Prompt as PromptUntyped,\n  StaticRouter as StaticRouterUntyped,\n  Switch as SwitchUntyped,\n  matchPath as matchPathUntyped,\n  withRouter as withRouterUntyped,\n} from 'react-router-dom';\n\nimport {Status, NotFound} from './modules/Status';\nimport {Redirect} from './modules/Redirect';\nimport {Router} from './modules/BrowserRouter';\nimport {Route} from './modules/Route';\n\nimport type {\n  BrowserRouterType,\n  HashRouterType,\n  LinkType,\n  MemoryRouterType,\n  NavLinkType,\n  PromptType,\n  StaticRouterType,\n  SwitchType,\n  matchPathType,\n  withRouterType,\n} from './types.js';\n\n/**\n * Cast each of these imports from react-router-dom to a copied-version of their\n * types.  This is necessary as the libdef defined types will not be accessible to\n * consumers of this package.\n */\nconst BrowserRouter: BrowserRouterType = BrowserRouterUntyped;\nconst HashRouter: HashRouterType = HashRouterUntyped;\nconst Link: LinkType = LinkUntyped;\nconst MemoryRouter: MemoryRouterType = MemoryRouterUntyped;\nconst NavLink: NavLinkType = NavLinkUntyped;\nconst Prompt: PromptType = PromptUntyped;\nconst StaticRouter: StaticRouterType = StaticRouterUntyped;\nconst Switch: SwitchType = SwitchUntyped;\nconst matchPath: matchPathType = matchPathUntyped;\nconst withRouter: withRouterType = withRouterUntyped;\n\nexport {\n  BrowserRouter,\n  HashRouter,\n  Link,\n  MemoryRouter,\n  NavLink,\n  Prompt,\n  StaticRouter,\n  Switch,\n  matchPath,\n  withRouter,\n  Status,\n  NotFound,\n  Redirect,\n  Router,\n  Route,\n};\n","// @flow\nimport type {LocationType} from '../types';\n\nconst addLeadingSlash = path => (path.charAt(0) === '/' ? path : '/' + path);\n\nexport const addRoutePrefix = (\n  location: string | LocationType,\n  prefix: string\n): string | LocationType => {\n  if (!prefix) return location;\n  if (typeof location === 'string') {\n    return `${prefix}${addLeadingSlash(location)}`;\n  } else {\n    return {\n      ...location,\n      pathname: `${prefix}${addLeadingSlash(location.pathname)}`,\n    };\n  }\n};\n\nexport const removeRoutePrefix = (\n  location: string | LocationType,\n  prefix: string\n): string | LocationType => {\n  if (!prefix) return location;\n  const pathname = typeof location === 'string' ? location : location.pathname;\n  const hasPrefix = (pathname + '/').indexOf(prefix + '/') === 0;\n  const unprefixedPathname = pathname.slice(prefix.length);\n  const relativePathname = hasPrefix ? unprefixedPathname : pathname;\n\n  if (typeof location === 'string') {\n    return relativePathname;\n  } else {\n    return {\n      ...location,\n      pathname: relativePathname,\n    };\n  }\n};\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {createPath, parsePath} from 'history';\n\nimport {addRoutePrefix, removeRoutePrefix} from './utils.js';\nimport type {RouterHistoryType, LocationType} from '../types.js';\n\nconst createLocation = (\n  path: string | LocationType,\n  prefix: string\n): LocationType => {\n  const unprefixedPath = removeRoutePrefix(path, prefix);\n  return parsePath(unprefixedPath);\n};\n\nconst createPrefixedURL = (\n  location: string | LocationType,\n  prefix: string\n): string | LocationType => {\n  if (typeof location === 'string') {\n    return addRoutePrefix(location, prefix);\n  } else {\n    return createPath(addRoutePrefix(location, prefix));\n  }\n};\n\nconst createURL = (\n  location: string | LocationType,\n  prefix: string\n): string | LocationType => {\n  if (typeof location === 'string') {\n    return removeRoutePrefix(location, prefix);\n  } else {\n    return createPath(removeRoutePrefix(location, prefix));\n  }\n};\n\nconst staticHandler = methodName => () => {\n  throw new Error(`You cannot ${methodName} with server side <Router>`);\n};\n\nconst noop = () => {};\n\ntype ContextType = {\n  action: ?string,\n  location: any,\n  url: ?string,\n};\n\nexport function createServerHistory(\n  basename: string,\n  context: ContextType,\n  location: string | LocationType\n): RouterHistoryType {\n  function createHref(location: string | LocationType): string | LocationType {\n    return createPrefixedURL(location, basename);\n  }\n  function push(path: string) {\n    context.action = 'PUSH';\n    context.location = createLocation(path, basename);\n    const url = createURL(path, basename);\n    if (typeof url === 'string') {\n      context.url = url;\n    }\n  }\n\n  function replace(path: string) {\n    context.action = 'REPLACE';\n    context.location = createLocation(path, basename);\n    const url = createURL(path, basename);\n    if (typeof url === 'string') {\n      context.url = url;\n    }\n  }\n  const history = {\n    length: 0,\n    createHref,\n    action: 'POP',\n    location: createLocation(location, basename),\n    push,\n    replace,\n    go: staticHandler('go'),\n    goBack: staticHandler('back'),\n    goForward: staticHandler('forward'),\n    listen: () => noop,\n  };\n  return (history: any);\n}\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\nimport {Router as DefaultProvider} from 'react-router-dom';\nimport createBrowserHistory from 'history/createBrowserHistory';\n\nimport {UniversalEventsToken} from 'fusion-plugin-universal-events';\nimport {createPlugin, createToken, html, unescape, memoize} from 'fusion-core';\nimport type {Token, Context, FusionPlugin} from 'fusion-core';\n\nimport {Router as ServerRouter} from './server.js';\nimport {Router as BrowserRouter} from './browser.js';\nimport {createServerHistory} from './modules/ServerHistory.js';\nimport {addRoutePrefix} from './modules/utils.js';\nimport type {RouterHistoryType} from './types.js';\n\ntype ProviderPropsType = {\n  history: RouterHistoryType,\n  basename?: string,\n  children?: React.Node,\n};\n\ntype HistoryWrapperType = {\n  from: (\n    ctx: Context\n  ) => {\n    history: RouterHistoryType,\n  },\n};\n\nexport const RouterProviderToken: Token<\n  React.ComponentType<ProviderPropsType>\n> = createToken('RouterProvider');\n\nexport const RouterToken: Token<HistoryWrapperType> = createToken('Router');\n\nconst Router = __NODE__ ? ServerRouter : BrowserRouter;\n\ntype PluginDepsType = {\n  emitter: typeof UniversalEventsToken.optional,\n  Provider: typeof RouterProviderToken.optional,\n};\n\nconst plugin: FusionPlugin<PluginDepsType, HistoryWrapperType> = createPlugin({\n  deps: {\n    emitter: UniversalEventsToken.optional,\n    Provider: RouterProviderToken.optional,\n  },\n  middleware: ({emitter, Provider = DefaultProvider}, self) => {\n    return async (ctx, next) => {\n      const prefix = ctx.prefix || '';\n      if (!ctx.element) {\n        return next();\n      }\n      const myAPI = self.from(ctx);\n      if (__NODE__) {\n        let pageData = {\n          title: ctx.path,\n          page: ctx.path,\n        };\n        const context = {\n          action: null,\n          location: null,\n          url: null,\n          setCode: code => {\n            ctx.status = code;\n          },\n          redirect: (url: string) => {\n            const toUrl = addRoutePrefix(url, prefix);\n            if (typeof toUrl === 'string') {\n              ctx.redirect(toUrl);\n            }\n          },\n        };\n        // Expose the history object\n        const history = createServerHistory(prefix, context, prefix + ctx.url);\n        myAPI.history = history;\n        ctx.element = (\n          <Router\n            history={history}\n            Provider={Provider}\n            onRoute={d => {\n              pageData = d;\n            }}\n            basename={prefix}\n            context={context}\n          >\n            {ctx.element}\n          </Router>\n        );\n        return next().then(() => {\n          ctx.template.body.push(\n            html`\n              <script id=\"__ROUTER_DATA__\" type=\"application/json\">\n                ${JSON.stringify(pageData)}\n              </script>\n            `\n          );\n\n          if (emitter) {\n            const scopedEmitter = emitter.from(ctx);\n            const emitTiming = type => timing => {\n              scopedEmitter.emit(type, {\n                title: pageData.title,\n                page: pageData.page,\n                status: ctx.status,\n                timing,\n              });\n            };\n            scopedEmitter.map(payload => {\n              if (payload && typeof payload === 'object') {\n                payload.__url__ = pageData.title;\n              }\n              return payload;\n            });\n            ctx.timing.end.then(timing => {\n              emitTiming('pageview:server')(timing);\n              ctx.timing.render.then(emitTiming('render:server'));\n            });\n          }\n        });\n      } else if (__BROWSER__) {\n        // TODO(#3): We should consider adding render/downstream/upstream timings for the browser\n        let pageData = {};\n        const element = document.getElementById('__ROUTER_DATA__');\n        if (element) {\n          pageData = JSON.parse(unescape(element.textContent));\n        }\n        emitter &&\n          emitter.map(payload => {\n            if (payload && typeof payload === 'object') {\n              payload.__url__ = pageData.title;\n              payload.__urlParams__ = pageData.params;\n            }\n            return payload;\n          });\n        // Expose the history object\n        const history = createBrowserHistory({basename: ctx.prefix});\n        myAPI.history = history;\n        ctx.element = (\n          <Router\n            history={history}\n            Provider={Provider}\n            basename={ctx.prefix}\n            onRoute={payload => {\n              pageData = payload;\n              emitter && emitter.emit('pageview:browser', payload);\n            }}\n          >\n            {ctx.element}\n          </Router>\n        );\n        return next();\n      }\n    };\n  },\n  provides() {\n    return {\n      from: memoize(() => {\n        const api: {history: RouterHistoryType} = ({\n          history: null,\n        }: any);\n        return api;\n      }),\n    };\n  },\n});\n\nexport default plugin;\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nexport type LocationType = {\n  pathname: string,\n  search: string,\n  hash: string,\n  state?: Object,\n  key?: string,\n};\n\nexport type LocationShapeType = {\n  pathname?: string,\n  search?: string,\n  hash?: string,\n  state?: Object,\n};\n\n/* Types below adapted from flow-typed's libdef for react-router-dom\n * (https://github.com/flow-typed/flow-typed/blob/master/definitions/npm/react-router-dom_v4.x.x/flow_v0.63.x-/react-router-dom_v4.x.x.js)\n */\nexport type BrowserRouterType = React.ComponentType<{|\n  basename?: string,\n  forceRefresh?: boolean,\n  getUserConfirmation?: GetUserConfirmation,\n  keyLength?: number,\n  children?: React.Node,\n|}>;\n\nexport type HashRouterType = React.ComponentType<{|\n  basename?: string,\n  getUserConfirmation?: GetUserConfirmation,\n  hashType?: 'slash' | 'noslash' | 'hashbang',\n  children?: React.Node,\n|}>;\n\nexport type LinkType = React.ComponentType<{\n  className?: string,\n  to: string | LocationShapeType,\n  replace?: boolean,\n  children?: React.Node,\n}>;\n\nexport type NavLinkType = React.ComponentType<{\n  to?: string | LocationShapeType,\n  activeClassName?: string,\n  className?: string,\n  activeStyle?: Object,\n  style?: Object,\n  isActive?: (match: MatchType, location: LocationType) => boolean,\n  children?: React.Node,\n  exact?: boolean,\n  strict?: boolean,\n}>;\n\n// NOTE: Below are mostly duplicated from react-router.\nexport type HistoryActionType = 'PUSH' | 'REPLACE' | 'POP';\n\nexport type RouterHistoryType = {\n  length: number,\n  location: LocationType,\n  action: HistoryActionType,\n  listen(\n    callback: (location: LocationType, action: HistoryActionType) => void\n  ): () => void,\n  push(path: string | LocationShapeType, state?: any): void,\n  replace(path: string | LocationShapeType, state?: any): void,\n  go(n: number): void,\n  goBack(): void,\n  goForward(): void,\n  canGo?: (n: number) => boolean,\n  block(\n    callback: (location: LocationType, action: HistoryActionType) => boolean\n  ): void,\n  // createMemoryHistory\n  index?: number,\n  entries?: Array<LocationType>,\n};\n\nexport type MatchType = {\n  params: {[key: string]: ?string},\n  isExact: boolean,\n  path: string,\n  url: string,\n};\n\nexport type ContextRouterType = {|\n  history: RouterHistoryType,\n  location: LocationType,\n  match: MatchType,\n  staticContext?: StaticRouterContextType,\n|};\n\ntype ContextRouterVoid = {\n  history: RouterHistoryType | void,\n  location: LocationType | void,\n  match: MatchType | void,\n  staticContext?: StaticRouterContextType | void,\n};\n\ntype GetUserConfirmation = (\n  message: string,\n  callback: (confirmed: boolean) => void\n) => void;\n\nexport type StaticRouterContextType = {\n  url?: string,\n};\n\nexport type StaticRouterType = React.ComponentType<{|\n  basename?: string,\n  location?: string | LocationType,\n  context: StaticRouterContextType,\n  children?: React.Node,\n|}>;\n\nexport type MemoryRouterType = React.ComponentType<{|\n  initialEntries?: Array<LocationShapeType | string>,\n  initialIndex?: number,\n  getUserConfirmation?: GetUserConfirmation,\n  keyLength?: number,\n  children?: React.Node,\n|}>;\n\nexport type RouterType = React.ComponentType<{\n  history: RouterHistoryType,\n  basename?: string,\n  children?: React.Node,\n}>;\n\nexport type PromptType = React.ComponentType<{|\n  message: string | ((location: LocationType) => string | boolean),\n  when?: boolean,\n|}>;\n\nexport type RedirectType = React.ComponentType<{|\n  to: string | LocationShapeType,\n  push?: boolean,\n  from?: string,\n  exact?: boolean,\n  strict?: boolean,\n  code?: number | string,\n  children?: React.Node,\n|}>;\n\nexport type RouteType = React.ComponentType<{|\n  component?: React.ComponentType<*>,\n  render?: (router: ContextRouterType) => React.Node,\n  children?: React.ComponentType<ContextRouterType> | React.Node,\n  path?: string | Array<string>,\n  exact?: boolean,\n  strict?: boolean,\n  location?: LocationShapeType,\n  sensitive?: boolean,\n|}>;\n\nexport type SwitchType = React.ComponentType<{|\n  children?: React.Node,\n  location?: LocationType,\n|}>;\n\nexport type withRouterType = <WrappedComponent: React.ComponentType<*>>(\n  Component: WrappedComponent\n) => React.ComponentType<\n  $Diff<React.ElementConfig<$Supertype<WrappedComponent>>, ContextRouterVoid>\n>;\n\ntype MatchPathOptions = {\n  path?: string,\n  exact?: boolean,\n  sensitive?: boolean,\n  strict?: boolean,\n};\n\nexport type matchPathType = (\n  pathname: string,\n  options?: MatchPathOptions | string,\n  parent?: MatchType\n) => null | MatchType;\n\nexport type generatePathType = (pattern?: string, params?: Object) => string;\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport plugin, {RouterProviderToken, RouterToken} from './plugin';\nimport * as server from './server';\nimport * as browser from './browser';\n\ndeclare var __BROWSER__: Boolean;\nconst BrowserRouter = __BROWSER__\n  ? browser.BrowserRouter\n  : server.BrowserRouter;\nconst HashRouter = __BROWSER__ ? browser.HashRouter : server.HashRouter;\nconst Link = __BROWSER__ ? browser.Link : server.Link;\nconst matchPath = __BROWSER__ ? browser.matchPath : server.matchPath;\nconst MemoryRouter = __BROWSER__ ? browser.MemoryRouter : server.MemoryRouter;\nconst NavLink = __BROWSER__ ? browser.NavLink : server.NavLink;\nconst Prompt = __BROWSER__ ? browser.Prompt : server.Prompt;\nconst Route = __BROWSER__ ? browser.Route : server.Route;\nconst Router = __BROWSER__ ? browser.Router : server.Router;\nconst Switch = __BROWSER__ ? browser.Switch : server.Switch;\nconst withRouter = __BROWSER__ ? browser.withRouter : server.withRouter;\n\nconst NotFound = __BROWSER__ ? browser.NotFound : server.NotFound;\nconst Redirect = __BROWSER__ ? browser.Redirect : server.Redirect;\nconst Status = __BROWSER__ ? browser.Status : server.Status;\n\nexport default plugin;\nexport {\n  BrowserRouter,\n  HashRouter,\n  Link,\n  matchPath,\n  MemoryRouter,\n  NavLink,\n  NotFound,\n  Prompt,\n  Redirect,\n  Route,\n  Router,\n  Status,\n  Switch,\n  withRouter,\n  RouterProviderToken,\n  RouterToken,\n};\n\nexport * from './types.js';\n"],"names":["Status","React","constructor","props","context","router","staticContext","setCode","parseInt","code","render","children","Array","isArray","contextTypes","PropTypes","shape","object","NotFound","React.createElement","Redirect","isStatic","perform","componentDidMount","history","push","to","redirect","replace","defaultProps","func","isRequired","BaseRouter","RouterUntyped","ServerRouter","getChildContext","onRoute","routeData","Provider","basename","Error","childContextTypes","ServerRouterTyped","ReactRouterRoute","ReactRouterRouteUntyped","isEmptyChildren","count","Route","trackingId","component","remainingProps","routeProps","match","isExact","page","path","title","params","only","displayName","BrowserRouter","BrowserRouterUntyped","HashRouter","HashRouterUntyped","Link","LinkUntyped","MemoryRouter","MemoryRouterUntyped","NavLink","NavLinkUntyped","Prompt","PromptUntyped","Switch","SwitchUntyped","matchPath","matchPathUntyped","withRouter","withRouterUntyped","BaseRouterUntyped","lastTitle","__IS_PREPARE__","propTypes","node","any","string","bool","addLeadingSlash","charAt","addRoutePrefix","location","prefix","pathname","removeRoutePrefix","hasPrefix","indexOf","unprefixedPathname","slice","length","relativePathname","createLocation","unprefixedPath","parsePath","createPrefixedURL","createPath","createURL","staticHandler","methodName","noop","createServerHistory","createHref","action","url","go","goBack","goForward","listen","RouterProviderToken","createToken","RouterToken","Router","plugin","createPlugin","deps","emitter","UniversalEventsToken","optional","middleware","DefaultProvider","self","ctx","next","element","myAPI","from","pageData","status","toUrl","d","then","template","body","html","JSON","stringify","scopedEmitter","emitTiming","type","timing","emit","map","payload","__url__","end","provides","memoize","api","server"],"mappings":"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"}